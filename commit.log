Add typescript support (partially working)